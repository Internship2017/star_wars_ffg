require 'rails_helper'

RSpec.describe "JsonSkill", type: :service do
  let(:json_skill) { 
    JsonSkill.new("Name" => "Astrogation", "Description" => { "General" => "There are many billions of stars populating the galaxy, all of which are in motion relative to one an­ other. Planets and smaller masses are in constant orbit around many of these stars. Vast numbers of nebulae and other astronomical anomalies are also present throughout the galaxy. Traveling between the worlds of the galaxy requires at least a rudimentary knowledge of the galaxy’s organization and compo­ sition. It also requires a navicomputer that is up to date on the current time and relative motion of all of these objects. The Astrogation skill represents a character’s ability to use his knowledge of the galaxy to most effectively program the hyperspace coordi­ nates for any jump. It can also represent a charac­ ter’s knowledge of stellar locations, astronomy, and the formation of the galaxy.", "Examples" => [{ "example" => "Programming a navicomputer for a hyperspace jump requires a successful Astrogation check." }, { "example" => "Astrogation governs a character’s basic knowledge of galactic geography. It may be checked any time a character wonders what other systems are nearby." }, { "example" => "In the event that characters arrive in an unknown system, they may use a navicomputer and their Astrogation skill to identify their location." }, { "example" => "Astrogation also covers familiarity with the galaxy’s hyperspace routes and the types of craft and commerce most common along those routes." }], "Difficulty" => "The difficulty of a hyperspace jump is based on the area targeted and the distance traveled. Travel to a nearby system along a well-established route is generally an Easy (1d8) check The difficulty increases based on the accuracy of navigational information and other factors. See page 252 for more information on hyperspace travel. \n Additional [success] beyond those required to calculate a hyperspace jump may be used to better target the location. While a single net [success] reaches the target system without incident, extras might place the character’s vessel directly into orbit around the target planet. Alternatively, characters may use additional [success] to reduce the time spent calculating, when rushed. \n [advantage] generated as part of an Astrogation check are most commonly used to reduce travel time. On extended journeys, they might be used to identify convenient stopovers en route, where the vessel can resupply or conduct additional business to help defray the cost of the trip. [triumph] could be spent either to com plete Astrogation calculations in the minimum amount of time, or to greatly reduce the travel time involved. It could also reveal some highly valuable but previously unknown information, such as a safer or quicker alternative route. \n Conversely, [disavantage] generated on an Astrogation check could decrease the accurracy or increase the travel time of hyperspace jump, or it could simply cause a character to miss relevant details when analyzing a hyperspace routes or galactic maps, [dispair] could be spent in the same way but to greater magnitude, or it could trigger some truly disastrous occurence, such as jumping out of hyperspace into the path of an asteroid." }, "Sources" => { "Source" => [{ "page" => "104", "source_book" => "Edge of the Empire Core Rulebook" }, { "page" => "116", "source_book" => "Age of Rebellion Core Rulebook" }, { "page" => "114", "source_book" => "Force and Destiny Core Rulebook" }] }, "Characteristic" => "Intellect", "Type" => "General")
  }
  it "get name from skill" do
    expect(json_skill.name).to eql "Astrogation" 
  end

  it "get description from skill" do
    expect(json_skill.general_description).to eql "There are many billions of stars populating the galaxy, all of which are in motion relative to one an­ other. Planets and smaller masses are in constant orbit around many of these stars. Vast numbers of nebulae and other astronomical anomalies are also present throughout the galaxy. Traveling between the worlds of the galaxy requires at least a rudimentary knowledge of the galaxy’s organization and compo­ sition. It also requires a navicomputer that is up to date on the current time and relative motion of all of these objects. The Astrogation skill represents a character’s ability to use his knowledge of the galaxy to most effectively program the hyperspace coordi­ nates for any jump. It can also represent a charac­ ter’s knowledge of stellar locations, astronomy, and the formation of the galaxy."
  end

  it "get difficulty from skill" do
    expect(json_skill.difficulty).to eql "The difficulty of a hyperspace jump is based on the area targeted and the distance traveled. Travel to a nearby system along a well-established route is generally an Easy (1d8) check The difficulty increases based on the accuracy of navigational information and other factors. See page 252 for more information on hyperspace travel. \n Additional [success] beyond those required to calculate a hyperspace jump may be used to better target the location. While a single net [success] reaches the target system without incident, extras might place the character’s vessel directly into orbit around the target planet. Alternatively, characters may use additional [success] to reduce the time spent calculating, when rushed. \n [advantage] generated as part of an Astrogation check are most commonly used to reduce travel time. On extended journeys, they might be used to identify convenient stopovers en route, where the vessel can resupply or conduct additional business to help defray the cost of the trip. [triumph] could be spent either to com plete Astrogation calculations in the minimum amount of time, or to greatly reduce the travel time involved. It could also reveal some highly valuable but previously unknown information, such as a safer or quicker alternative route. \n Conversely, [disavantage] generated on an Astrogation check could decrease the accurracy or increase the travel time of hyperspace jump, or it could simply cause a character to miss relevant details when analyzing a hyperspace routes or galactic maps, [dispair] could be spent in the same way but to greater magnitude, or it could trigger some truly disastrous occurence, such as jumping out of hyperspace into the path of an asteroid."
  end

  it "get characteristic from skill" do
    expect(json_skill.characteristic).to eql "Intellect" 
  end

  it "get type of skill from skill" do
    expect(json_skill.type_of_skill).to eql "General" 
  end
end